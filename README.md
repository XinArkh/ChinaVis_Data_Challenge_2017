# 2017 年第四届中国可视化与可视分析大会_数据可视分析挑战赛/挑战 1（ChinaVis Data Challenge 2017）

*网址：http://www.chinavis.org/2017/challenge.html*

数据集可在官网下载。

## 挑战赛简介

>  数据可视分析挑战赛是中国可视化与可视分析大会的一个重要环节。挑战赛提供一系列精彩的剧本、详实的数据和具体的问题，并邀请研究人员、开发人员和爱好者使用他们最有效的可视分析技术和工具来完成数据分析任务。挑战赛旨在帮助研究人员、开发人员和爱好者评估他们的技术和工具在解决复杂问题中的有效性和新颖性，并促进我国可视化与可视分析相关研究与应用的发展与进步。

## 挑战 1 背景

> “恭喜中大奖了！”、“您可以兑换银行卡积分了！”、“您需要无抵押银行贷款吗？”这类垃圾短信相信你一定收到过不少。用“伪基站”发送垃圾短信已成为不法分子诈骗、推销的新手段，特别是一些附带恶意链接的木马短信，用户点击后还会造成手机中毒和网银盗刷等现象。“伪基站”即假基站，能够搜集以其为中心、一定半径范围内的手机卡信息，利用GSM验证漏洞伪装成运营商的基站，冒用银行、运营商、国家机关或他人号码，强行向用户发送诈骗、色情、赌博、广告等短信息。不法人员利用伪基站发送短信，不仅干扰公共频率资源，影响人们的正常通讯，而且通过群发短信的方式发送内容不受控的短信息，严重侵害了社会秩序。
>
> QHNet公司推出手机卫士应用软件，安装该软件的用户在收到垃圾短信时可以主动上报，这样手机卫士应用软件积累了大量被用户标注的垃圾短信样本数据，其中每一条短信都包含正文、接收时间、发送者号码以及接收该条垃圾短信前最后连接的正常合法基站信息。如果能够定位到伪基站发送垃圾短信时的位置就能帮助执法人员打击不法分子，但为了保护用户隐私，手机卫士应用软件并未获取用户的精确GPS位置信息。那么如何确定伪基站的位置信息呢？目前，我们将用户主动上报垃圾短信前最后连接的合法基站的位置，近似作为伪基站的位置。但伪基站有非常强的流动性，因此依据近似位置和传统数据分析方法，仍然很难准确把握伪基站的活动规律。QHNet公司这次将部分垃圾短信样本提供出来，希望您使用可视分析方法，揭示伪基站的行为模式，为有关部门建言打击伪基站的有效方案。

## 使用流程：

1. 将数据解压至根目录下 data 文件夹
2. 运行 `separateTime.py`，得到 24 个时间区间的数据 csv 文件，每个文件是 63 天中所有落在这一时间区间的数据（这一步耗时较久，优化思路在注释中给出，暂未实现），保存在`./csv_separated_by_time`中
3. 运行 `csv2txt.py`，提取上一步得到的 csv 文件中经纬度信息，转换为 txt 格式，保存在`loc_txt_time`中
4. 运行 `separateLabel.py`，得到每一天 3 种类别的垃圾短信（用三种标签标出，有标签数据保存在文件夹`data_labeled`中，这部分属于组员的工作，代码未在此仓库给出）的全天活动记录 csv 文件，保存在`./csv_separated_by_label`中
5. 编辑并运行 `csv2txt.py`，提取上一步得到的 csv 文件中经纬度信息，转换为 txt 格式，保存在`loc_txt_label`中
6. 将`loc_txt_time`或`loc_txt_label`中的数据粘贴到`heatmap.html`中对应位置，打开网页即可得到对应的位置热图
7. `plot1.py`――绘制每天垃圾短信总数的柱状图
8. `plot2.py`――绘制所有日期×所有时段垃圾短信总数的热图
9. `plot3.py`――绘制三个典型日期中垃圾短信在不同时段数量变化情况的折线图（运行此脚本之前需要先修改并运行`separateTime.py`，处理三个日期的带标签 csv 文件）
10. `plot4.py`――针对三种垃圾短信绘制三张图，每一张图是一种垃圾短信在三个日期中不同时段的数量变化情况（依赖条件同`plot3.py`）